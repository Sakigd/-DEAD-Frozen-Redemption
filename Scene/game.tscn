[gd_scene load_steps=5 format=3 uid="uid://c6w345fuao3ue"]

[ext_resource type="Script" path="res://Script/Game.gd" id="1_e8gcn"]
[ext_resource type="PackedScene" uid="uid://bcwyfattjly6" path="res://Scene/Player.tscn" id="2_qpv4r"]

[sub_resource type="GDScript" id="GDScript_u86wk"]
script/source = "@tool
extends ColorRect
@export var ingame_zoom : float = 1

func _process(_delta):
	size.y = ProjectSettings.get(\"display/window/size/viewport_height\")
	size.x = ProjectSettings.get(\"display/window/size/viewport_width\")
	scale = Vector2.ONE
	position = Vector2.ZERO
	rotation = 0
	if abs(ingame_zoom) < 0.5 :
		ingame_zoom = 0.5 * sign(ingame_zoom)
	$PixelArt.scale = Vector2(ingame_zoom,ingame_zoom)
"

[sub_resource type="GDScript" id="GDScript_74l62"]
script/source = "@tool
extends SubViewportContainer

func _process(_delta):
	position = (get_parent().scale)*(get_parent().size)/-2
	#print($PixelArtViewport.get_camera_2d())
"

[node name="Game" type="Node2D"]
script = ExtResource("1_e8gcn")
starting_map = "levelBoss.tscn"

[node name="Screen" type="ColorRect" parent="."]
custom_minimum_size = Vector2(640, 380)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 640.0
offset_bottom = 380.0
grow_horizontal = 2
grow_vertical = 2
color = Color(1, 1, 1, 0)
script = SubResource("GDScript_u86wk")

[node name="HiRes" type="SubViewportContainer" parent="Screen"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 1.0
offset_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="PixelArt" type="SubViewportContainer" parent="Screen"]
process_priority = 100
layout_mode = 0
offset_left = -320.0
offset_top = -190.0
offset_right = 960.0
offset_bottom = 570.0
pivot_offset = Vector2(640, 380)
stretch = true
script = SubResource("GDScript_74l62")
metadata/_edit_lock_ = true

[node name="PixelArtViewport" type="SubViewport" parent="Screen/PixelArt"]
disable_3d = true
transparent_bg = true
handle_input_locally = false
snap_2d_transforms_to_pixel = true
snap_2d_vertices_to_pixel = true
canvas_item_default_texture_filter = 0
audio_listener_enable_2d = true
size = Vector2i(1280, 760)
render_target_update_mode = 4

[node name="Player" parent="Screen/PixelArt/PixelArtViewport" instance=ExtResource("2_qpv4r")]
z_index = 1
position = Vector2(641, 381)

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Screen/PixelArt/PixelArtViewport/Player"]
position = Vector2(-320, -190)
remote_path = NodePath("../../../../../playerCamera")

[node name="Frame" type="MarginContainer" parent="Screen"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = -2
theme_override_constants/margin_top = -2
theme_override_constants/margin_right = -2
theme_override_constants/margin_bottom = -2

[node name="FrameOutline" type="ReferenceRect" parent="Screen/Frame"]
layout_mode = 2
border_color = Color(1, 1, 1, 1)
border_width = 2.0

[node name="playerCamera" type="Camera2D" parent="."]
position = Vector2(321, 191)
limit_left = -320
limit_right = 1344
limit_bottom = 290
